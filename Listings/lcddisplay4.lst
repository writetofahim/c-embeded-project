C51 COMPILER V9.60.0.0   LCDDISPLAY4                                                       01/26/2023 21:50:02 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE LCDDISPLAY4
OBJECT MODULE PLACED IN .\Objects\lcddisplay4.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE lcddisplay4.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listin
                    -gs\lcddisplay4.lst) TABS(2) OBJECT(.\Objects\lcddisplay4.obj)

line level    source

   1          #include<reg51.h>
   2          #include <stdio.h>
   3          #include <string.h>
   4          
   5          sbit S1 = P0^7;
   6          sbit S2 = P2^7;
   7          
   8          sbit north_red = P1^0;
   9          sbit north_yellow = P1^1;
  10          sbit north_green = P1^2;
  11          
  12          sbit south_red = P1^3;
  13          sbit south_yellow = P1^4;
  14          sbit south_green = P1^5;
  15          
  16          sbit east_red = P1^6;
  17          sbit east_yellow = P1^7;
  18          sbit east_green = P2^0;
  19          
  20          sbit west_red = P2^1;
  21          sbit west_yellow = P2^2;
  22          sbit west_green = P2^3;
  23          sbit rs=P2^4;
  24          sbit rw=P2^5;
  25          sbit en=P2^6;
  26          
  27          void lcdcmd(unsigned char);
  28          void lcddata(unsigned char);
  29          void delay(unsigned int time);
  30          void displayOpen();
  31          
  32          int j;
  33          char full_name[] = "NOTHING";
  34          char south[] = "SOUTH OPEN";
  35          char north[] = "NORTH OPEN";
  36          char east[] = "EAST OPEN";
  37          char west[] = "WEST OPEN";
  38          
  39          void delay2(){
  40   1          unsigned int i;
  41   1          for(i=0;i<5000;i++);
  42   1      }
  43          
  44          void displayOpen(int count){
  45   1        lcdcmd(0x01);
  46   1        lcdcmd(0x38);delay2();
  47   1        lcdcmd(0x80);delay2();
  48   1        lcdcmd(0x0C);delay2();
  49   1          
  50   1          if(count==1){
  51   2          lcdcmd(0xC0);delay2();
  52   2              for(j = 0; j < strlen(north); j++) {
  53   3                lcddata(north[j]);delay2();
  54   3              }
C51 COMPILER V9.60.0.0   LCDDISPLAY4                                                       01/26/2023 21:50:02 PAGE 2   

  55   2          }
  56   1      
  57   1      
  58   1             if(count==2){
  59   2          lcdcmd(0xC0);delay2();
  60   2              for(j = 0; j < strlen(south); j++) {
  61   3                lcddata(south[j]);delay2();
  62   3              }
  63   2           }
  64   1      
  65   1           if(count==3){
  66   2       lcdcmd(0xC0);delay2();
  67   2              for(j = 0; j < strlen(east); j++) {
  68   3                lcddata(east[j]);delay2();
  69   3              }
  70   2           }
  71   1      
  72   1           if(count==4){
  73   2          lcdcmd(0xC0);delay2();
  74   2              for(j = 0; j < strlen(west); j++) {
  75   3                lcddata(west[j]);delay2();
  76   3              }
  77   2           }
  78   1          delay2();delay2();
  79   1            //lcdcmd(0x01);delay();
  80   1      }
  81          
  82          void delay3(unsigned int time) 
  83          {
  84   1        
  85   1          unsigned int i, j;
  86   1          for(i=0; i<time; i++)
  87   1              for(j=0; j<1275; j++);
  88   1      }
  89          
  90          void delay(unsigned int time) 
  91          {
  92   1        
  93   1        
  94   1        unsigned char seg[10]={0xc0, 0xf9, 0xa4, 0xb0, 0x99, 0x92, 0x82, 0xf8, 0x80, 0x90};
  95   1        unsigned char x;
  96   1        int num1,num2;
  97   1        
  98   1        P0=0x00;
  99   1          for(x=time; x<=time; x--){
 100   2            
 101   2            //P0=seg[x];
 102   2            //delay3(150);
 103   2            num1 = x/10;   
 104   2            S1 = 1;         
 105   2            S2 = 0;
 106   2            P0 = seg[num1];  
 107   2            delay3(150);
 108   2      
 109   2            
 110   2            num2 = x%10;    
 111   2            S1 = 0;         
 112   2            S2 = 1;
 113   2            P0 = seg[num2];
 114   2            delay3(150);
 115   2          }
 116   1      }
C51 COMPILER V9.60.0.0   LCDDISPLAY4                                                       01/26/2023 21:50:02 PAGE 3   

 117          
 118          void main(){
 119   1        
 120   1          P3=0x00;
 121   1          while(1)
 122   1          {   
 123   2            north_red=1;
 124   2            north_green=north_yellow=0;
 125   2            south_red=1;
 126   2            south_green=south_yellow=0;
 127   2            east_red=1;
 128   2            east_green=east_yellow=0;
 129   2            west_red=1;
 130   2            west_green=west_yellow=0;
 131   2            
 132   2              // open north
 133   2              north_red = 0;
 134   2              north_yellow=0;
 135   2              north_green = 1;
 136   2              displayOpen(1);
 137   2              delay(9);
 138   2              east_red = 0;
 139   2              east_yellow=1;
 140   2              delay(4);
 141   2              north_green = 0;
 142   2              north_red = 1;
 143   2              
 144   2              // open east
 145   2              east_red = 0;
 146   2              east_yellow=0;
 147   2              east_green = 1;
 148   2              displayOpen(2);
 149   2              delay(9);
 150   2              south_red = 0;
 151   2              south_yellow=1;
 152   2              delay(4);
 153   2              east_green = 0;
 154   2              east_red = 1;
 155   2              
 156   2            
 157   2              // open south
 158   2              south_red = 0;
 159   2              south_yellow=0;
 160   2              south_green = 1;
 161   2              displayOpen(3);
 162   2              delay(9);
 163   2              west_red = 0;
 164   2              west_yellow=1;
 165   2              delay(4);
 166   2              south_green = 0;
 167   2              south_red = 1;
 168   2              
 169   2              // open west
 170   2              west_red = 0;
 171   2              west_yellow=0;
 172   2              west_green = 1;
 173   2              displayOpen(4);
 174   2              delay(9);
 175   2              north_red = 0;
 176   2              north_yellow=1;
 177   2              delay(4);
 178   2              west_green = 0;
C51 COMPILER V9.60.0.0   LCDDISPLAY4                                                       01/26/2023 21:50:02 PAGE 4   

 179   2              west_red = 1; 
 180   2          }
 181   1      }
 182          
 183          void lcdcmd(unsigned char val){
 184   1          P3=val;
 185   1          rs=0;
 186   1          rw=0;
 187   1          en=1;
 188   1          delay2();
 189   1          en=0;
 190   1      }
 191          
 192          void lcddata(unsigned char val){
 193   1          P3=val;
 194   1          rs=1;
 195   1          rw=0;
 196   1          en=1;
 197   1          delay2();
 198   1          en=0;
 199   1      }
 200          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    601    ----
   CONSTANT SIZE    =     10    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     52      16
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
